<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="439px" preserveAspectRatio="none" style="width:520px;height:439px;background:#FFFFFF;" version="1.1" viewBox="0 0 520 439" width="520px" zoomAndPan="magnify"><defs><filter height="300%" id="fbvlxd7agzlpg" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="176" x="170.25" y="28.708">Transaction cleaner</text><rect fill="#FFFFFF" filter="url(#fbvlxd7agzlpg)" height="275.0625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="45" y="98.25"/><rect fill="#FFFFFF" filter="url(#fbvlxd7agzlpg)" height="275.0625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="222" y="98.25"/><rect fill="#FFFFFF" filter="url(#fbvlxd7agzlpg)" height="275.0625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="405" y="98.25"/><rect fill="#FFFFFF" filter="url(#fbvlxd7agzlpg)" height="143.5313" style="stroke:#000000;stroke-width:2.0;" width="372.5" x="134" y="192.6484"/><rect fill="#FFFFFF" filter="url(#fbvlxd7agzlpg)" height="87.3984" style="stroke:#000000;stroke-width:2.0;" width="352.5" x="144" y="216.7813"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="50" x2="50" y1="88.25" y2="382.3125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="227" x2="227" y1="88.25" y2="382.3125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="409.5" x2="409.5" y1="88.25" y2="382.3125"/><rect fill="#FEFECE" filter="url(#fbvlxd7agzlpg)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="86" x="5" y="52.9531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="12" y="72.9482">Scheduler</text><rect fill="#FEFECE" filter="url(#fbvlxd7agzlpg)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="86" x="5" y="381.3125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="12" y="401.3076">Scheduler</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="154" y="84.9482">TransactionCleaner</text><path d="M206.5,43.9531 L206.5,67.9531 M206.5,55.9531 L223.5,55.9531 " fill="none" filter="url(#fbvlxd7agzlpg)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="235.5" cy="55.9531" fill="#FEFECE" filter="url(#fbvlxd7agzlpg)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="154" y="394.3076">TransactionCleaner</text><path d="M206.5,401.6094 L206.5,425.6094 M206.5,413.6094 L223.5,413.6094 " fill="none" filter="url(#fbvlxd7agzlpg)" style="stroke:#A80036;stroke-width:2.0;"/><ellipse cx="235.5" cy="413.6094" fill="#FEFECE" filter="url(#fbvlxd7agzlpg)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147" x="333.5" y="84.9482">TransactionManager</text><ellipse cx="410" cy="55.9531" fill="#FEFECE" filter="url(#fbvlxd7agzlpg)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="406,43.9531,412,38.9531,410,43.9531,412,48.9531,406,43.9531" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147" x="333.5" y="394.3076">TransactionManager</text><ellipse cx="410" cy="413.6094" fill="#FEFECE" filter="url(#fbvlxd7agzlpg)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><polygon fill="#A80036" points="406,401.6094,412,396.6094,410,401.6094,412,406.6094,406,401.6094" style="stroke:#A80036;stroke-width:1.0;"/><rect fill="#FFFFFF" filter="url(#fbvlxd7agzlpg)" height="275.0625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="45" y="98.25"/><rect fill="#FFFFFF" filter="url(#fbvlxd7agzlpg)" height="275.0625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="222" y="98.25"/><rect fill="#FFFFFF" filter="url(#fbvlxd7agzlpg)" height="275.0625" style="stroke:#A80036;stroke-width:1.0;" width="10" x="405" y="98.25"/><polygon fill="#A80036" points="210,115.3828,220,119.3828,210,123.3828,214,119.3828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="55" x2="216" y1="119.3828" y2="119.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="62" y="114.3169">start cleaning process</text><polygon fill="#A80036" points="393,144.5156,403,148.5156,393,152.5156,397,148.5156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="232" x2="399" y1="148.5156" y2="148.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="239" y="143.4497">read open transactions</text><line style="stroke:#A80036;stroke-width:1.0;" x1="232" x2="242" y1="177.6484" y2="173.6484"/><line style="stroke:#A80036;stroke-width:1.0;" x1="232" x2="242" y1="177.6484" y2="181.6484"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="232" x2="404" y1="177.6484" y2="177.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="249" y="172.5825">transactions</text><path d="M134,192.6484 L210,192.6484 L210,199.6484 L200,209.6484 L134,209.6484 L134,192.6484 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="143.5313" style="stroke:#000000;stroke-width:2.0;" width="372.5" x="134" y="192.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31" x="149" y="205.7153">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="150" x="225" y="204.8589">["for open transaction"]</text><path d="M144,216.7813 L213,216.7813 L213,223.7813 L203,233.7813 L144,233.7813 L144,216.7813 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="87.3984" style="stroke:#000000;stroke-width:2.0;" width="352.5" x="144" y="216.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="24" x="159" y="229.8481">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="146" x="228" y="228.9917">[transaction is expired]</text><rect fill="#FFFFFF" filter="url(#fbvlxd7agzlpg)" height="40.2656" style="stroke:#000000;stroke-width:2.0;" width="334.5" x="151" y="258.9141"/><path d="M151,258.9141 L217,258.9141 L217,265.9141 L207,275.9141 L151,275.9141 L151,258.9141 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="164" y="272.981">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="263.75" y="291.981">Close transaction</text><line style="stroke:#A80036;stroke-width:1.0;" x1="55" x2="65" y1="364.3125" y2="360.3125"/><line style="stroke:#A80036;stroke-width:1.0;" x1="55" x2="65" y1="364.3125" y2="368.3125"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="55" x2="221" y1="364.3125" y2="364.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23" x="72" y="359.2466">ack</text><!--MD5=[a35f0af5ee42bece3f809e7a3f495a0d]
@startuml
title "Transaction cleaner"

participant Scheduler
boundary TransactionCleaner
control TransactionManager

activate Scheduler
activate TransactionCleaner
activate TransactionManager

Scheduler -> TransactionCleaner: start cleaning process
TransactionCleaner -> TransactionManager: read open transactions
TransactionManager - ->> TransactionCleaner: transactions

loop "for open transaction"
    opt transaction is expired
    |||
        ref over TransactionManager, TransactionCleaner
            Close transaction
        end
    end
    |||
end
TransactionCleaner - ->> Scheduler: ack
@enduml

PlantUML version 1.2021.11(Sat Oct 02 15:26:11 CEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>