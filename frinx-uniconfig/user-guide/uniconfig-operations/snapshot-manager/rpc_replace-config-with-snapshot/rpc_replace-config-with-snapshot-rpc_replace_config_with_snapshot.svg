<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
     contentScriptType="application/ecmascript" contentStyleType="text/css" height="371px" preserveAspectRatio="none"
     style="width:863px;height:371px;background:#FFFFFF;" version="1.1" viewBox="0 0 863 371" width="863px"
     zoomAndPan="magnify">
    <defs>
        <filter height="300%" id="fhp7n6wj92tsh" width="300%" x="-1" y="-1">
            <feGaussianBlur result="blurOut" stdDeviation="2.0"/>
            <feColorMatrix in="blurOut" result="blurOut2" type="matrix"
                           values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
            <feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/>
            <feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/>
        </filter>
    </defs>
    <g>
        <text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="302" x="278.75"
              y="28.708">RPC replace-config-with-snapshot
        </text>
        <rect fill="#FFFFFF" filter="url(#fhp7n6wj92tsh)" height="133.6641" style="stroke:#000000;stroke-width:2.0;"
              width="664" x="185.5" y="184.5156"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="48" x2="48" y1="123.25"
              y2="364.3125"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="291.5" x2="291.5" y1="123.25"
              y2="364.3125"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="505.5" x2="505.5" y1="123.25"
              y2="364.3125"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="731.5" x2="731.5" y1="123.25"
              y2="364.3125"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="5"
              y="119.9482">Application
        </text>
        <ellipse cx="48" cy="49.9531" fill="#FEFECE" filter="url(#fhp7n6wj92tsh)" rx="8" ry="8"
                 style="stroke:#A80036;stroke-width:2.0;"/>
        <path d="M48,57.9531 L48,84.9531 M35,65.9531 L61,65.9531 M48,84.9531 L35,99.9531 M48,84.9531 L61,99.9531 "
              fill="none" filter="url(#fhp7n6wj92tsh)" style="stroke:#A80036;stroke-width:2.0;"/>
        <rect fill="#FEFECE" filter="url(#fhp7n6wj92tsh)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;"
              width="189" x="195.5" y="87.9531"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175" x="202.5"
              y="107.9482">Uniconfig Node Manager
        </text>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="209" x="398.5"
              y="119.9482">Snapshot topology (CONF DS)
        </text>
        <path d="M488,70.9531 C488,60.9531 506,60.9531 506,60.9531 C506,60.9531 524,60.9531 524,70.9531 L524,96.9531 C524,106.9531 506,106.9531 506,106.9531 C506,106.9531 488,106.9531 488,96.9531 L488,70.9531 "
              fill="#FEFECE" filter="url(#fhp7n6wj92tsh)" style="stroke:#000000;stroke-width:1.5;"/>
        <path d="M488,70.9531 C488,80.9531 506,80.9531 506,80.9531 C506,80.9531 524,80.9531 524,70.9531 " fill="none"
              style="stroke:#000000;stroke-width:1.5;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="210" x="623.5"
              y="119.9482">Uniconfig topology (CONF DS)
        </text>
        <path d="M713.5,70.9531 C713.5,60.9531 731.5,60.9531 731.5,60.9531 C731.5,60.9531 749.5,60.9531 749.5,70.9531 L749.5,96.9531 C749.5,106.9531 731.5,106.9531 731.5,106.9531 C731.5,106.9531 713.5,106.9531 713.5,96.9531 L713.5,70.9531 "
              fill="#FEFECE" filter="url(#fhp7n6wj92tsh)" style="stroke:#000000;stroke-width:1.5;"/>
        <path d="M713.5,70.9531 C713.5,80.9531 731.5,80.9531 731.5,80.9531 C731.5,80.9531 749.5,80.9531 749.5,70.9531 "
              fill="none" style="stroke:#000000;stroke-width:1.5;"/>
        <polygon fill="#A80036" points="280,165.5156,290,169.5156,280,173.5156,284,169.5156"
                 style="stroke:#A80036;stroke-width:1.0;"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="48" x2="286" y1="169.5156" y2="169.5156"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220" x="55"
              y="149.3169">RPC replace-config-with-snapshot
        </text>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="59"
              y="164.4497">(snapshot name, target nodes)
        </text>
        <path d="M185.5,184.5156 L261.5,184.5156 L261.5,191.5156 L251.5,201.5156 L185.5,201.5156 L185.5,184.5156 "
              fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
        <rect fill="none" height="133.6641" style="stroke:#000000;stroke-width:2.0;" width="664" x="185.5"
              y="184.5156"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing"
              textLength="31" x="200.5" y="197.5825">loop
        </text>
        <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing"
              textLength="137" x="276.5" y="196.7261">[for each target node]
        </text>
        <polygon fill="#A80036" points="494,218.7813,504,222.7813,494,226.7813,498,222.7813"
                 style="stroke:#A80036;stroke-width:1.0;"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="292" x2="500" y1="222.7813" y2="222.7813"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="299"
              y="217.7153">read node from snapshot
        </text>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="292" x2="302" y1="251.9141" y2="247.9141"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="292" x2="302" y1="251.9141" y2="255.9141"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="292" x2="505" y1="251.9141"
              y2="251.9141"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="309"
              y="246.8481">node configuration
        </text>
        <polygon fill="#A80036" points="719.5,277.0469,729.5,281.0469,719.5,285.0469,723.5,281.0469"
                 style="stroke:#A80036;stroke-width:1.0;"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="292" x2="725.5" y1="281.0469" y2="281.0469"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="299"
              y="275.981">write Uniconfig node configuration
        </text>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="292" x2="302" y1="310.1797" y2="306.1797"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="292" x2="302" y1="310.1797" y2="314.1797"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="292" x2="730.5" y1="310.1797"
              y2="310.1797"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23" x="309"
              y="305.1138">ack
        </text>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="48" x2="58" y1="346.3125" y2="342.3125"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="48" x2="58" y1="346.3125" y2="350.3125"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="48" x2="291" y1="346.3125"
              y2="346.3125"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="65"
              y="341.2466">RPC response
        </text><!--MD5=[1a07c392731a27052c81eb3e2aadf73e]
@startuml
hide footbox
title RPC replace-config-with-snapshot

actor Application
participant "Uniconfig Node Manager"
database "Snapshot topology (CONF DS)"
database "Uniconfig topology (CONF DS)"

Application -> "Uniconfig Node Manager": RPC replace-config-with-snapshot\n (snapshot name, target nodes)
loop for each target node
    "Uniconfig Node Manager" -> "Snapshot topology (CONF DS)": read node from snapshot
    "Snapshot topology (CONF DS)" - ->> "Uniconfig Node Manager": node configuration
    "Uniconfig Node Manager" -> "Uniconfig topology (CONF DS)": write Uniconfig node configuration
    "Uniconfig topology (CONF DS)" - ->> "Uniconfig Node Manager": ack
end
"Uniconfig Node Manager" - ->> Application: RPC response
@enduml

PlantUML version 1.2021.11(Sat Oct 02 15:26:11 CEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
-->
    </g>
</svg>