<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
     contentScriptType="application/ecmascript" contentStyleType="text/css" height="684px" preserveAspectRatio="none"
     style="width:1126px;height:684px;background:#FFFFFF;" version="1.1" viewBox="0 0 1126 684" width="1126px"
     zoomAndPan="magnify">
    <defs>
        <filter height="300%" id="f1j044vzzkmcuu" width="300%" x="-1" y="-1">
            <feGaussianBlur result="blurOut" stdDeviation="2.0"/>
            <feColorMatrix in="blurOut" result="blurOut2" type="matrix"
                           values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
            <feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/>
            <feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/>
        </filter>
    </defs>
    <g>
        <text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="128" x="497"
              y="28.708">RPC is-in-sync
        </text>
        <rect fill="#FFFFFF" filter="url(#f1j044vzzkmcuu)" height="535.2734" style="stroke:#A80036;stroke-width:1.0;"
              width="10" x="318" y="133.25"/>
        <rect fill="#FFFFFF" filter="url(#f1j044vzzkmcuu)" height="535.2734" style="stroke:#A80036;stroke-width:1.0;"
              width="10" x="795" y="133.25"/>
        <rect fill="#FFFFFF" filter="url(#f1j044vzzkmcuu)" height="535.2734" style="stroke:#A80036;stroke-width:1.0;"
              width="10" x="989.5" y="133.25"/>
        <rect fill="#FFFFFF" filter="url(#f1j044vzzkmcuu)" height="419.875" style="stroke:#000000;stroke-width:2.0;"
              width="905.5" x="206.5" y="169.3828"/>
        <rect fill="#FFFFFF" filter="url(#f1j044vzzkmcuu)" height="230.0781" style="stroke:#000000;stroke-width:2.0;"
              width="583.5" x="216.5" y="352.1797"/>
        <rect fill="#FFFFFF" height="56.9375" style="stroke:none;stroke-width:1.0;" width="583.5" x="216.5"
              y="411.4453"/>
        <rect fill="#FFFFFF" height="56.9375" style="stroke:none;stroke-width:1.0;" width="583.5" x="216.5"
              y="468.3828"/>
        <rect fill="#FFFFFF" height="56.9375" style="stroke:none;stroke-width:1.0;" width="583.5" x="216.5"
              y="525.3203"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="48" x2="48" y1="123.25"
              y2="677.5234"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="322.5" x2="322.5" y1="123.25"
              y2="677.5234"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="800" x2="800" y1="123.25"
              y2="677.5234"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="994" x2="994" y1="123.25"
              y2="677.5234"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="5"
              y="119.9482">Application
        </text>
        <ellipse cx="48" cy="49.9531" fill="#FEFECE" filter="url(#f1j044vzzkmcuu)" rx="8" ry="8"
                 style="stroke:#A80036;stroke-width:2.0;"/>
        <path d="M48,57.9531 L48,84.9531 M35,65.9531 L61,65.9531 M48,84.9531 L35,99.9531 M48,84.9531 L61,99.9531 "
              fill="none" filter="url(#f1j044vzzkmcuu)" style="stroke:#A80036;stroke-width:2.0;"/>
        <rect fill="#FEFECE" filter="url(#f1j044vzzkmcuu)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;"
              width="189" x="226.5" y="87.9531"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175" x="233.5"
              y="107.9482">Uniconfig Node Manager
        </text>
        <rect fill="#FEFECE" filter="url(#f1j044vzzkmcuu)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;"
              width="150" x="723" y="87.9531"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="730"
              y="107.9482">Unified mountpoint
        </text>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="209" x="887"
              y="119.9482">Uniconfig topology (OPER DS)
        </text>
        <path d="M976.5,70.9531 C976.5,60.9531 994.5,60.9531 994.5,60.9531 C994.5,60.9531 1012.5,60.9531 1012.5,70.9531 L1012.5,96.9531 C1012.5,106.9531 994.5,106.9531 994.5,106.9531 C994.5,106.9531 976.5,106.9531 976.5,96.9531 L976.5,70.9531 "
              fill="#FEFECE" filter="url(#f1j044vzzkmcuu)" style="stroke:#000000;stroke-width:1.5;"/>
        <path d="M976.5,70.9531 C976.5,80.9531 994.5,80.9531 994.5,80.9531 C994.5,80.9531 1012.5,80.9531 1012.5,70.9531 "
              fill="none" style="stroke:#000000;stroke-width:1.5;"/>
        <rect fill="#FFFFFF" filter="url(#f1j044vzzkmcuu)" height="535.2734" style="stroke:#A80036;stroke-width:1.0;"
              width="10" x="318" y="133.25"/>
        <rect fill="#FFFFFF" filter="url(#f1j044vzzkmcuu)" height="535.2734" style="stroke:#A80036;stroke-width:1.0;"
              width="10" x="795" y="133.25"/>
        <rect fill="#FFFFFF" filter="url(#f1j044vzzkmcuu)" height="535.2734" style="stroke:#A80036;stroke-width:1.0;"
              width="10" x="989.5" y="133.25"/>
        <polygon fill="#A80036" points="306,150.3828,316,154.3828,306,158.3828,310,154.3828"
                 style="stroke:#A80036;stroke-width:1.0;"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="48" x2="312" y1="154.3828" y2="154.3828"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="246" x="55"
              y="149.3169">RPC sync-from-network(target nodes)
        </text>
        <path d="M206.5,169.3828 L282.5,169.3828 L282.5,176.3828 L272.5,186.3828 L206.5,186.3828 L206.5,169.3828 "
              fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
        <rect fill="none" height="419.875" style="stroke:#000000;stroke-width:2.0;" width="905.5" x="206.5"
              y="169.3828"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing"
              textLength="31" x="221.5" y="182.4497">loop
        </text>
        <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing"
              textLength="137" x="297.5" y="181.5933">[for each target node]
        </text>
        <polygon fill="#A80036" points="783,203.6484,793,207.6484,783,211.6484,787,207.6484"
                 style="stroke:#A80036;stroke-width:1.0;"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="328" x2="789" y1="207.6484" y2="207.6484"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205" x="335"
              y="202.5825">read(config-metadata node IID)
        </text>
        <polygon fill="#A80036" points="339,232.7813,329,236.7813,339,240.7813,335,236.7813"
                 style="stroke:#A80036;stroke-width:1.0;"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="333" x2="794" y1="236.7813"
              y2="236.7813"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="429" x="345"
              y="231.7153">actual config-metadata (includes device configuration fingerprint)
        </text>
        <polygon fill="#A80036" points="977.5,261.9141,987.5,265.9141,977.5,269.9141,981.5,265.9141"
                 style="stroke:#A80036;stroke-width:1.0;"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="328" x2="983.5" y1="265.9141" y2="265.9141"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205" x="335"
              y="260.8481">read(config-metadata node IID)
        </text>
        <polygon fill="#A80036" points="339,291.0469,329,295.0469,339,299.0469,335,295.0469"
                 style="stroke:#A80036;stroke-width:1.0;"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="333" x2="988.5" y1="295.0469"
              y2="295.0469"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="437" x="345"
              y="289.981">last saved config-metadata (includes last configuration fingerprint)
        </text>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="328" x2="370" y1="324.1797" y2="324.1797"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="370" x2="370" y1="324.1797" y2="337.1797"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="329" x2="370" y1="337.1797" y2="337.1797"/>
        <polygon fill="#A80036" points="339,333.1797,329,337.1797,339,341.1797,335,337.1797"
                 style="stroke:#A80036;stroke-width:1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="335"
              y="319.1138">compare obtained fingeprints
        </text>
        <path d="M216.5,352.1797 L280.5,352.1797 L280.5,359.1797 L270.5,369.1797 L216.5,369.1797 L216.5,352.1797 "
              fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
        <rect fill="none" height="230.0781" style="stroke:#000000;stroke-width:2.0;" width="583.5" x="216.5"
              y="352.1797"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing"
              textLength="19" x="231.5" y="365.2466">alt
        </text>
        <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing"
              textLength="295" x="295.5" y="364.3901">[actual fingerprint from device is not available]
        </text>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="328" x2="370" y1="390.4453" y2="390.4453"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="370" x2="370" y1="390.4453" y2="403.4453"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="329" x2="370" y1="403.4453" y2="403.4453"/>
        <polygon fill="#A80036" points="339,399.4453,329,403.4453,339,407.4453,335,403.4453"
                 style="stroke:#A80036;stroke-width:1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="392" x="335"
              y="385.3794">prepare failed result for this node - unsupported device type
        </text>
        <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="216.5" x2="800" y1="412.4453"
              y2="412.4453"/>
        <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing"
              textLength="403" x="221.5" y="422.6558">[failed to load fingerprint from datastore or Unified mountpoint]
        </text>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="328" x2="370" y1="447.3828" y2="447.3828"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="370" x2="370" y1="447.3828" y2="460.3828"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="329" x2="370" y1="460.3828" y2="460.3828"/>
        <polygon fill="#A80036" points="339,456.3828,329,460.3828,339,464.3828,335,460.3828"
                 style="stroke:#A80036;stroke-width:1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="402" x="335"
              y="442.3169">prepare failed result for this node - occurred unexpected error
        </text>
        <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="216.5" x2="800" y1="469.3828"
              y2="469.3828"/>
        <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing"
              textLength="483" x="221.5" y="479.5933">[actual fingerprint from device equals to fingerprint in
            operational datastore]
        </text>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="328" x2="370" y1="504.3203" y2="504.3203"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="370" x2="370" y1="504.3203" y2="517.3203"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="329" x2="370" y1="517.3203" y2="517.3203"/>
        <polygon fill="#A80036" points="339,513.3203,329,517.3203,339,521.3203,335,517.3203"
                 style="stroke:#A80036;stroke-width:1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="447" x="335"
              y="499.2544">prepare success result for this node with 'is-in-sync' flag set to 'true'
        </text>
        <line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="216.5" x2="800" y1="526.3203"
              y2="526.3203"/>
        <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing"
              textLength="535" x="221.5" y="536.5308">[actual fingerprint from device does not equal to fingerprint in
            operational datastore]
        </text>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="328" x2="370" y1="561.2578" y2="561.2578"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="370" x2="370" y1="561.2578" y2="574.2578"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="329" x2="370" y1="574.2578" y2="574.2578"/>
        <polygon fill="#A80036" points="339,570.2578,329,574.2578,339,578.2578,335,574.2578"
                 style="stroke:#A80036;stroke-width:1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="453" x="335"
              y="556.1919">prepare success result for this node with 'is-in-sync' flag set to 'false'
        </text>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="328" x2="370" y1="617.3906" y2="617.3906"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="370" x2="370" y1="617.3906" y2="630.3906"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="329" x2="370" y1="630.3906" y2="630.3906"/>
        <polygon fill="#A80036" points="339,626.3906,329,630.3906,339,634.3906,335,630.3906"
                 style="stroke:#A80036;stroke-width:1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="335"
              y="612.3247">prepare RPC response
        </text>
        <polygon fill="#A80036" points="59,655.5234,49,659.5234,59,663.5234,55,659.5234"
                 style="stroke:#A80036;stroke-width:1.0;"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="53" x2="317" y1="659.5234"
              y2="659.5234"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="65"
              y="654.4575">RPC response
        </text><!--MD5=[4f17a06cd2dfe669837012c8eb88b469]
@startuml
hide footbox
title RPC is-in-sync

actor Application
participant "Uniconfig Node Manager"

participant "Unified mountpoint"
database "Uniconfig topology (OPER DS)"

activate "Uniconfig Node Manager"
activate "Unified mountpoint"
activate "Uniconfig topology (OPER DS)"

Application -> "Uniconfig Node Manager": RPC sync-from-network(target nodes)
loop for each target node
    "Uniconfig Node Manager" -> "Unified mountpoint":read(config-metadata node IID)
    "Unified mountpoint" - -> "Uniconfig Node Manager":actual config-metadata (includes device configuration fingerprint)

    "Uniconfig Node Manager" -> "Uniconfig topology (OPER DS)": read(config-metadata node IID)
    "Uniconfig topology (OPER DS)" - -> "Uniconfig Node Manager":last saved config-metadata (includes last configuration fingerprint)

"Uniconfig Node Manager"->"Uniconfig Node Manager":compare obtained fingeprints
  alt actual fingerprint from device is not available
  "Uniconfig Node Manager"->"Uniconfig Node Manager":prepare failed result for this node - unsupported device type
  else failed to load fingerprint from datastore or Unified mountpoint
  "Uniconfig Node Manager"->"Uniconfig Node Manager":prepare failed result for this node - occurred unexpected error
  else actual fingerprint from device equals to fingerprint in operational datastore
  "Uniconfig Node Manager"->"Uniconfig Node Manager":prepare success result for this node with 'is-in-sync' flag set to 'true'
  else actual fingerprint from device does not equal to fingerprint in operational datastore
  "Uniconfig Node Manager"->"Uniconfig Node Manager":prepare success result for this node with 'is-in-sync' flag set to 'false'
  end

end

"Uniconfig Node Manager"->"Uniconfig Node Manager":prepare RPC response
"Uniconfig Node Manager" - -> Application:RPC response
@enduml

PlantUML version 1.2021.11(Sat Oct 02 15:26:11 CEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
-->
    </g>
</svg>