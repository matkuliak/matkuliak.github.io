<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
     contentScriptType="application/ecmascript" contentStyleType="text/css" height="398px" preserveAspectRatio="none"
     style="width:951px;height:398px;background:#FFFFFF;" version="1.1" viewBox="0 0 951 398" width="951px"
     zoomAndPan="magnify">
    <defs>
        <filter height="300%" id="fujp09sf9dunr" width="300%" x="-1" y="-1">
            <feGaussianBlur result="blurOut" stdDeviation="2.0"/>
            <feColorMatrix in="blurOut" result="blurOut2" type="matrix"
                           values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/>
            <feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/>
            <feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/>
        </filter>
    </defs>
    <g>
        <text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="159" x="394"
              y="28.708">RPC calculate-diff
        </text>
        <rect fill="#FFFFFF" filter="url(#fujp09sf9dunr)" height="175.7969" style="stroke:#000000;stroke-width:2.0;"
              width="759.5" x="177.5" y="169.3828"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="48" x2="48" y1="123.25"
              y2="391.3125"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="283.5" x2="283.5" y1="123.25"
              y2="391.3125"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="594" x2="594" y1="123.25"
              y2="391.3125"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="819" x2="819" y1="123.25"
              y2="391.3125"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="5"
              y="119.9482">Application
        </text>
        <ellipse cx="48" cy="49.9531" fill="#FEFECE" filter="url(#fujp09sf9dunr)" rx="8" ry="8"
                 style="stroke:#A80036;stroke-width:2.0;"/>
        <path d="M48,57.9531 L48,84.9531 M35,65.9531 L61,65.9531 M48,84.9531 L35,99.9531 M48,84.9531 L61,99.9531 "
              fill="none" filter="url(#fujp09sf9dunr)" style="stroke:#A80036;stroke-width:2.0;"/>
        <rect fill="#FEFECE" filter="url(#fujp09sf9dunr)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;"
              width="189" x="187.5" y="87.9531"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175" x="194.5"
              y="107.9482">Uniconfig Node Manager
        </text>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="210" x="486"
              y="119.9482">Uniconfig topology (CONF DS)
        </text>
        <path d="M576,70.9531 C576,60.9531 594,60.9531 594,60.9531 C594,60.9531 612,60.9531 612,70.9531 L612,96.9531 C612,106.9531 594,106.9531 594,106.9531 C594,106.9531 576,106.9531 576,96.9531 L576,70.9531 "
              fill="#FEFECE" filter="url(#fujp09sf9dunr)" style="stroke:#000000;stroke-width:1.5;"/>
        <path d="M576,70.9531 C576,80.9531 594,80.9531 594,80.9531 C594,80.9531 612,80.9531 612,70.9531 " fill="none"
              style="stroke:#000000;stroke-width:1.5;"/>
        <text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="209" x="712"
              y="119.9482">Uniconfig topology (OPER DS)
        </text>
        <path d="M801.5,70.9531 C801.5,60.9531 819.5,60.9531 819.5,60.9531 C819.5,60.9531 837.5,60.9531 837.5,70.9531 L837.5,96.9531 C837.5,106.9531 819.5,106.9531 819.5,106.9531 C819.5,106.9531 801.5,106.9531 801.5,96.9531 L801.5,70.9531 "
              fill="#FEFECE" filter="url(#fujp09sf9dunr)" style="stroke:#000000;stroke-width:1.5;"/>
        <path d="M801.5,70.9531 C801.5,80.9531 819.5,80.9531 819.5,80.9531 C819.5,80.9531 837.5,80.9531 837.5,70.9531 "
              fill="none" style="stroke:#000000;stroke-width:1.5;"/>
        <polygon fill="#A80036" points="272,150.3828,282,154.3828,272,158.3828,276,154.3828"
                 style="stroke:#A80036;stroke-width:1.0;"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="48" x2="278" y1="154.3828" y2="154.3828"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="55"
              y="149.3169">RPC calculate-diff (target nodes)
        </text>
        <path d="M177.5,169.3828 L253.5,169.3828 L253.5,176.3828 L243.5,186.3828 L177.5,186.3828 L177.5,169.3828 "
              fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/>
        <rect fill="none" height="175.7969" style="stroke:#000000;stroke-width:2.0;" width="759.5" x="177.5"
              y="169.3828"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing"
              textLength="31" x="192.5" y="182.4497">loop
        </text>
        <text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing"
              textLength="138" x="268.5" y="181.5933">[for each target-node]
        </text>
        <polygon fill="#A80036" points="807.5,203.6484,817.5,207.6484,807.5,211.6484,811.5,207.6484"
                 style="stroke:#A80036;stroke-width:1.0;"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="284" x2="813.5" y1="207.6484" y2="207.6484"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="291"
              y="202.5825">read actual node configuration
        </text>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="284" x2="294" y1="236.7813" y2="232.7813"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="284" x2="294" y1="236.7813" y2="240.7813"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="284" x2="818.5" y1="236.7813"
              y2="236.7813"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="301"
              y="231.7153">actual configuration
        </text>
        <polygon fill="#A80036" points="582,261.9141,592,265.9141,582,269.9141,586,265.9141"
                 style="stroke:#A80036;stroke-width:1.0;"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="284" x2="588" y1="265.9141" y2="265.9141"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="291"
              y="260.8481">read intended node configuration
        </text>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="284" x2="294" y1="295.0469" y2="291.0469"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="284" x2="294" y1="295.0469" y2="299.0469"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="284" x2="593" y1="295.0469"
              y2="295.0469"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="301"
              y="289.981">intended configuration
        </text>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="284" x2="326" y1="324.1797" y2="324.1797"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="326" x2="326" y1="324.1797" y2="337.1797"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="285" x2="326" y1="337.1797" y2="337.1797"/>
        <polygon fill="#A80036" points="295,333.1797,285,337.1797,295,341.1797,291,337.1797"
                 style="stroke:#A80036;stroke-width:1.0;"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="296" x="291"
              y="319.1138">create diff between actual and intended node
        </text>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="48" x2="58" y1="373.3125" y2="369.3125"/>
        <line style="stroke:#A80036;stroke-width:1.0;" x1="48" x2="58" y1="373.3125" y2="377.3125"/>
        <line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="48" x2="283" y1="373.3125"
              y2="373.3125"/>
        <text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="65"
              y="368.2466">RPC result diff
        </text><!--MD5=[b7302e2228c703d06818c66c8a5d0830]
@startuml
hide footbox
title RPC calculate-diff

actor Application
participant "Uniconfig Node Manager"
database "Uniconfig topology (CONF DS)"
database "Uniconfig topology (OPER DS)"

Application -> "Uniconfig Node Manager": RPC calculate-diff (target nodes)
loop for each target-node
    "Uniconfig Node Manager" -> "Uniconfig topology (OPER DS)": read actual node configuration
    "Uniconfig topology (OPER DS)" - ->> "Uniconfig Node Manager": actual configuration
    "Uniconfig Node Manager" -> "Uniconfig topology (CONF DS)": read intended node configuration
    "Uniconfig topology (CONF DS)" - ->> "Uniconfig Node Manager": intended configuration
    "Uniconfig Node Manager" -> "Uniconfig Node Manager": create diff between actual and intended node
end
"Uniconfig Node Manager" - ->> Application: RPC result diff
@enduml

PlantUML version 1.2021.11(Sat Oct 02 15:26:11 CEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
-->
    </g>
</svg>